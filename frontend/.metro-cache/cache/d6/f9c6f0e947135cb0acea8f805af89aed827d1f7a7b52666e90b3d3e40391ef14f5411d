{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":49,"index":49}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"react-native","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":50},"end":{"line":2,"column":73,"index":123}}],"key":"KyzuX10g6ixS9UfynhmjlvCIG3g=","exportNames":["*"],"imports":1}},{"name":"expo-router","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":124},"end":{"line":3,"column":62,"index":186}}],"key":"/+ErnBisjrT6aDU+GRp5Qz/lYoY=","exportNames":["*"],"imports":1}},{"name":"../contexts/AuthContext","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":187},"end":{"line":4,"column":50,"index":237}}],"key":"oNCgyH4yx4pAIVZXLqqRGB2kuCY=","exportNames":["*"],"imports":1}},{"name":"expo-linking","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":238},"end":{"line":5,"column":40,"index":278}}],"key":"UOn5wJuCXvTT9EneNUmI6H0GQgM=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/app/auth-callback.tsx\",\n    _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return AuthCallback;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _react = require(_dependencyMap[1], \"react\");\n  var _reactNative = require(_dependencyMap[2], \"react-native\");\n  var _expoRouter = require(_dependencyMap[3], \"expo-router\");\n  var _contextsAuthContext = require(_dependencyMap[4], \"../contexts/AuthContext\");\n  var _expoLinking = require(_dependencyMap[5], \"expo-linking\");\n  var Linking = _interopNamespace(_expoLinking);\n  var _reactJsxDevRuntime = require(_dependencyMap[6], \"react/jsx-dev-runtime\");\n  function AuthCallback() {\n    _s();\n    var _useAuth = (0, _contextsAuthContext.useAuth)(),\n      login = _useAuth.login;\n    var router = (0, _expoRouter.useRouter)();\n    var hasProcessed = (0, _react.useRef)(false);\n    (0, _react.useEffect)(() => {\n      if (hasProcessed.current) return;\n      hasProcessed.current = true;\n      var processAuth = /*#__PURE__*/function () {\n        var _ref = (0, _asyncToGenerator.default)(function* () {\n          try {\n            // Get the URL that opened the app\n            var url = yield Linking.getInitialURL();\n            console.log('Callback URL:', url);\n            if (url) {\n              // Extract session_id from URL fragment\n              var fragment = url.split('#')[1];\n              if (fragment) {\n                var params = new URLSearchParams(fragment);\n                var sessionId = params.get('session_id');\n                if (sessionId) {\n                  console.log('Session ID found:', sessionId);\n                  yield login(sessionId);\n                  router.replace('/(tabs)/feed');\n                  return;\n                }\n              }\n            }\n\n            // If no session_id found, redirect to login\n            console.log('No session ID found');\n            router.replace('/');\n          } catch (error) {\n            console.error('Auth callback error:', error);\n            router.replace('/');\n          }\n        });\n        return function processAuth() {\n          return _ref.apply(this, arguments);\n        };\n      }();\n      processAuth();\n    }, []);\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(_reactNative.View, {\n      style: styles.container,\n      children: [/*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(_reactNative.ActivityIndicator, {\n        size: \"large\",\n        color: \"#8B4513\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 7\n      }, this), /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(_reactNative.Text, {\n        style: styles.text,\n        children: \"Completing sign in...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 5\n    }, this);\n  }\n  _s(AuthCallback, \"vOrmLumeVG/U9Tw7wSzxc/TX5Dc=\", false, function () {\n    return [_contextsAuthContext.useAuth, _expoRouter.useRouter];\n  });\n  _c = AuthCallback;\n  var styles = _reactNative.StyleSheet.create({\n    container: {\n      flex: 1,\n      backgroundColor: '#FFF8DC',\n      justifyContent: 'center',\n      alignItems: 'center'\n    },\n    text: {\n      marginTop: 16,\n      fontSize: 16,\n      color: '#8B4513'\n    }\n  });\n  var _c;\n  $RefreshReg$(_c, \"AuthCallback\");\n});","lineCount":130,"map":[[29,2,7,15,"Object"],[29,8,7,15],[29,9,7,15,"defineProperty"],[29,23,7,15],[29,24,7,15,"exports"],[29,31,7,15],[30,4,7,15,"enumerable"],[30,14,7,15],[31,4,7,15,"get"],[31,7,7,15],[31,18,7,15,"get"],[31,19,7,15],[32,6,7,15],[32,13,7,15,"AuthCallback"],[32,25,7,15],[33,4,7,15],[34,2,7,15],[35,2,56,1],[35,6,56,1,"_babelRuntimeHelpersAsyncToGenerator"],[35,42,56,1],[35,45,56,1,"require"],[35,52,56,1],[35,53,56,1,"_dependencyMap"],[35,67,56,1],[36,2,56,1],[36,6,56,1,"_asyncToGenerator"],[36,23,56,1],[36,26,56,1,"_interopDefault"],[36,41,56,1],[36,42,56,1,"_babelRuntimeHelpersAsyncToGenerator"],[36,78,56,1],[37,2,1,0],[37,6,1,0,"_react"],[37,12,1,0],[37,15,1,0,"require"],[37,22,1,0],[37,23,1,0,"_dependencyMap"],[37,37,1,0],[38,2,2,0],[38,6,2,0,"_reactNative"],[38,18,2,0],[38,21,2,0,"require"],[38,28,2,0],[38,29,2,0,"_dependencyMap"],[38,43,2,0],[39,2,3,0],[39,6,3,0,"_expoRouter"],[39,17,3,0],[39,20,3,0,"require"],[39,27,3,0],[39,28,3,0,"_dependencyMap"],[39,42,3,0],[40,2,4,0],[40,6,4,0,"_contextsAuthContext"],[40,26,4,0],[40,29,4,0,"require"],[40,36,4,0],[40,37,4,0,"_dependencyMap"],[40,51,4,0],[41,2,5,0],[41,6,5,0,"_expoLinking"],[41,18,5,0],[41,21,5,0,"require"],[41,28,5,0],[41,29,5,0,"_dependencyMap"],[41,43,5,0],[42,2,5,0],[42,6,5,0,"Linking"],[42,13,5,0],[42,16,5,0,"_interopNamespace"],[42,33,5,0],[42,34,5,0,"_expoLinking"],[42,46,5,0],[43,2,5,40],[43,6,5,40,"_reactJsxDevRuntime"],[43,25,5,40],[43,28,5,40,"require"],[43,35,5,40],[43,36,5,40,"_dependencyMap"],[43,50,5,40],[44,2,7,15],[44,11,7,24,"AuthCallback"],[44,23,7,36,"AuthCallback"],[44,24,7,36],[44,26,7,39],[45,4,7,39,"_s"],[45,6,7,39],[46,4,8,2],[46,8,8,2,"_useAuth"],[46,16,8,2],[46,19,8,20],[46,23,8,20,"useAuth"],[46,43,8,27],[46,44,8,27,"useAuth"],[46,51,8,27],[46,53,8,28],[46,54,8,29],[47,6,8,10,"login"],[47,11,8,15],[47,14,8,15,"_useAuth"],[47,22,8,15],[47,23,8,10,"login"],[47,28,8,15],[48,4,9,2],[48,8,9,8,"router"],[48,14,9,14],[48,17,9,17],[48,21,9,17,"useRouter"],[48,32,9,26],[48,33,9,26,"useRouter"],[48,42,9,26],[48,44,9,27],[48,45,9,28],[49,4,10,2],[49,8,10,8,"hasProcessed"],[49,20,10,20],[49,23,10,23],[49,27,10,23,"useRef"],[49,33,10,29],[49,34,10,29,"useRef"],[49,40,10,29],[49,42,10,30],[49,47,10,35],[49,48,10,36],[50,4,12,2],[50,8,12,2,"useEffect"],[50,14,12,11],[50,15,12,11,"useEffect"],[50,24,12,11],[50,26,12,12],[50,32,12,18],[51,6,13,4],[51,10,13,8,"hasProcessed"],[51,22,13,20],[51,23,13,21,"current"],[51,30,13,28],[51,32,13,30],[52,6,14,4,"hasProcessed"],[52,18,14,16],[52,19,14,17,"current"],[52,26,14,24],[52,29,14,27],[52,33,14,31],[53,6,16,4],[53,10,16,10,"processAuth"],[53,21,16,21],[54,8,16,21],[54,12,16,21,"_ref"],[54,16,16,21],[54,23,16,21,"_asyncToGenerator"],[54,40,16,21],[54,41,16,21,"default"],[54,48,16,21],[54,50,16,24],[54,63,16,36],[55,10,17,6],[55,14,17,10],[56,12,18,8],[57,12,19,8],[57,16,19,14,"url"],[57,19,19,17],[57,28,19,26,"Linking"],[57,35,19,33],[57,36,19,34,"getInitialURL"],[57,49,19,47],[57,50,19,48],[57,51,19,49],[58,12,20,8,"console"],[58,19,20,15],[58,20,20,16,"log"],[58,23,20,19],[58,24,20,20],[58,39,20,35],[58,41,20,37,"url"],[58,44,20,40],[58,45,20,41],[59,12,22,8],[59,16,22,12,"url"],[59,19,22,15],[59,21,22,17],[60,14,23,10],[61,14,24,10],[61,18,24,16,"fragment"],[61,26,24,24],[61,29,24,27,"url"],[61,32,24,30],[61,33,24,31,"split"],[61,38,24,36],[61,39,24,37],[61,42,24,40],[61,43,24,41],[61,44,24,42],[61,45,24,43],[61,46,24,44],[62,14,25,10],[62,18,25,14,"fragment"],[62,26,25,22],[62,28,25,24],[63,16,26,12],[63,20,26,18,"params"],[63,26,26,24],[63,29,26,27],[63,33,26,31,"URLSearchParams"],[63,48,26,46],[63,49,26,47,"fragment"],[63,57,26,55],[63,58,26,56],[64,16,27,12],[64,20,27,18,"sessionId"],[64,29,27,27],[64,32,27,30,"params"],[64,38,27,36],[64,39,27,37,"get"],[64,42,27,40],[64,43,27,41],[64,55,27,53],[64,56,27,54],[65,16,29,12],[65,20,29,16,"sessionId"],[65,29,29,25],[65,31,29,27],[66,18,30,14,"console"],[66,25,30,21],[66,26,30,22,"log"],[66,29,30,25],[66,30,30,26],[66,49,30,45],[66,51,30,47,"sessionId"],[66,60,30,56],[66,61,30,57],[67,18,31,14],[67,24,31,20,"login"],[67,29,31,25],[67,30,31,26,"sessionId"],[67,39,31,35],[67,40,31,36],[68,18,32,14,"router"],[68,24,32,20],[68,25,32,21,"replace"],[68,32,32,28],[68,33,32,29],[68,47,32,43],[68,48,32,44],[69,18,33,14],[70,16,34,12],[71,14,35,10],[72,12,36,8],[74,12,38,8],[75,12,39,8,"console"],[75,19,39,15],[75,20,39,16,"log"],[75,23,39,19],[75,24,39,20],[75,45,39,41],[75,46,39,42],[76,12,40,8,"router"],[76,18,40,14],[76,19,40,15,"replace"],[76,26,40,22],[76,27,40,23],[76,30,40,26],[76,31,40,27],[77,10,41,6],[77,11,41,7],[77,12,41,8],[77,19,41,15,"error"],[77,24,41,20],[77,26,41,22],[78,12,42,8,"console"],[78,19,42,15],[78,20,42,16,"error"],[78,25,42,21],[78,26,42,22],[78,48,42,44],[78,50,42,46,"error"],[78,55,42,51],[78,56,42,52],[79,12,43,8,"router"],[79,18,43,14],[79,19,43,15,"replace"],[79,26,43,22],[79,27,43,23],[79,30,43,26],[79,31,43,27],[80,10,44,6],[81,8,45,4],[81,9,45,5],[82,8,45,5],[82,24,16,10,"processAuth"],[82,35,16,21,"processAuth"],[82,36,16,21],[83,10,16,21],[83,17,16,21,"_ref"],[83,21,16,21],[83,22,16,21,"apply"],[83,27,16,21],[83,34,16,21,"arguments"],[83,43,16,21],[84,8,16,21],[85,6,16,21],[85,9,45,5],[86,6,47,4,"processAuth"],[86,17,47,15],[86,18,47,16],[86,19,47,17],[87,4,48,2],[87,5,48,3],[87,7,48,5],[87,9,48,7],[87,10,48,8],[88,4,50,2],[88,24,51,4],[88,28,51,4,"_reactJsxDevRuntime"],[88,47,51,4],[88,48,51,4,"jsxDEV"],[88,54,51,4],[88,56,51,5,"_reactNative"],[88,68,51,9],[88,69,51,9,"View"],[88,73,51,9],[89,6,51,10,"style"],[89,11,51,15],[89,13,51,17,"styles"],[89,19,51,23],[89,20,51,24,"container"],[89,29,51,34],[90,6,51,34,"children"],[90,14,51,34],[90,30,52,6],[90,34,52,6,"_reactJsxDevRuntime"],[90,53,52,6],[90,54,52,6,"jsxDEV"],[90,60,52,6],[90,62,52,7,"_reactNative"],[90,74,52,24],[90,75,52,24,"ActivityIndicator"],[90,92,52,24],[91,8,52,25,"size"],[91,12,52,29],[91,14,52,30],[91,21,52,37],[92,8,52,38,"color"],[92,13,52,43],[92,15,52,44],[93,6,52,53],[94,8,52,53,"fileName"],[94,16,52,53],[94,18,52,53,"_jsxFileName"],[94,30,52,53],[95,8,52,53,"lineNumber"],[95,18,52,53],[96,8,52,53,"columnNumber"],[96,20,52,53],[97,6,52,53],[97,13,52,55],[97,14,52,56],[97,29,53,6],[97,33,53,6,"_reactJsxDevRuntime"],[97,52,53,6],[97,53,53,6,"jsxDEV"],[97,59,53,6],[97,61,53,7,"_reactNative"],[97,73,53,11],[97,74,53,11,"Text"],[97,78,53,11],[98,8,53,12,"style"],[98,13,53,17],[98,15,53,19,"styles"],[98,21,53,25],[98,22,53,26,"text"],[98,26,53,31],[99,8,53,31,"children"],[99,16,53,31],[99,18,53,32],[100,6,53,53],[101,8,53,53,"fileName"],[101,16,53,53],[101,18,53,53,"_jsxFileName"],[101,30,53,53],[102,8,53,53,"lineNumber"],[102,18,53,53],[103,8,53,53,"columnNumber"],[103,20,53,53],[104,6,53,53],[104,13,53,59],[104,14,53,60],[105,4,53,60],[106,6,53,60,"fileName"],[106,14,53,60],[106,16,53,60,"_jsxFileName"],[106,28,53,60],[107,6,53,60,"lineNumber"],[107,16,53,60],[108,6,53,60,"columnNumber"],[108,18,53,60],[109,4,53,60],[109,11,54,10],[109,12,54,11],[110,2,56,0],[111,2,56,1,"_s"],[111,4,56,1],[111,5,7,24,"AuthCallback"],[111,17,7,36],[112,4,7,36],[112,12,8,20,"useAuth"],[112,32,8,27],[112,33,8,27,"useAuth"],[112,40,8,27],[112,42,9,17,"useRouter"],[112,53,9,26],[112,54,9,26,"useRouter"],[112,63,9,26],[113,2,9,26],[114,2,9,26,"_c"],[114,4,9,26],[114,7,7,24,"AuthCallback"],[114,19,7,36],[115,2,58,0],[115,6,58,6,"styles"],[115,12,58,12],[115,15,58,15,"StyleSheet"],[115,27,58,25],[115,28,58,25,"StyleSheet"],[115,38,58,25],[115,39,58,26,"create"],[115,45,58,32],[115,46,58,33],[116,4,59,2,"container"],[116,13,59,11],[116,15,59,13],[117,6,60,4,"flex"],[117,10,60,8],[117,12,60,10],[117,13,60,11],[118,6,61,4,"backgroundColor"],[118,21,61,19],[118,23,61,21],[118,32,61,30],[119,6,62,4,"justifyContent"],[119,20,62,18],[119,22,62,20],[119,30,62,28],[120,6,63,4,"alignItems"],[120,16,63,14],[120,18,63,16],[121,4,64,2],[121,5,64,3],[122,4,65,2,"text"],[122,8,65,6],[122,10,65,8],[123,6,66,4,"marginTop"],[123,15,66,13],[123,17,66,15],[123,19,66,17],[124,6,67,4,"fontSize"],[124,14,67,12],[124,16,67,14],[124,18,67,16],[125,6,68,4,"color"],[125,11,68,9],[125,13,68,11],[126,4,69,2],[127,2,70,0],[127,3,70,1],[127,4,70,2],[128,2,70,3],[128,6,70,3,"_c"],[128,8,70,3],[129,2,70,3,"$RefreshReg$"],[129,14,70,3],[129,15,70,3,"_c"],[129,17,70,3],[130,0,70,3],[130,3]],"functionMap":{"names":["<global>","AuthCallback","useEffect$argument_0","processAuth"],"mappings":"AAA;eCM;YCK;wBCI;KD6B;GDG;CDQ"},"hasCjsExports":false},"type":"js/module"}]}