{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":49,"index":49}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/View","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"4kYBDC6LJJXoH7P9rWDi3vkLVB0=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Text","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"JKIzsQ5YQ0gDj0MIyY0Q7F1zJtU=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/StyleSheet","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"MK7+k1V+KnvCVW7Kj2k/ydtjmVU=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/ActivityIndicator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"bSAkUkqZq0shBb5bU6kCYXi4ciA=","exportNames":["*"],"imports":1}},{"name":"expo-router","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":124},"end":{"line":3,"column":62,"index":186}}],"key":"/+ErnBisjrT6aDU+GRp5Qz/lYoY=","exportNames":["*"],"imports":1}},{"name":"../contexts/AuthContext","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":187},"end":{"line":4,"column":50,"index":237}}],"key":"oNCgyH4yx4pAIVZXLqqRGB2kuCY=","exportNames":["*"],"imports":1}},{"name":"expo-linking","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":238},"end":{"line":5,"column":40,"index":278}}],"key":"UOn5wJuCXvTT9EneNUmI6H0GQgM=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/app/auth-callback.tsx\",\n    _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return AuthCallback;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeWebDistExportsView = require(_dependencyMap[1], \"react-native-web/dist/exports/View\");\n  var View = _interopDefault(_reactNativeWebDistExportsView);\n  var _reactNativeWebDistExportsText = require(_dependencyMap[2], \"react-native-web/dist/exports/Text\");\n  var Text = _interopDefault(_reactNativeWebDistExportsText);\n  var _reactNativeWebDistExportsStyleSheet = require(_dependencyMap[3], \"react-native-web/dist/exports/StyleSheet\");\n  var StyleSheet = _interopDefault(_reactNativeWebDistExportsStyleSheet);\n  var _reactNativeWebDistExportsActivityIndicator = require(_dependencyMap[4], \"react-native-web/dist/exports/ActivityIndicator\");\n  var ActivityIndicator = _interopDefault(_reactNativeWebDistExportsActivityIndicator);\n  var _expoRouter = require(_dependencyMap[5], \"expo-router\");\n  var _contextsAuthContext = require(_dependencyMap[6], \"../contexts/AuthContext\");\n  var _expoLinking = require(_dependencyMap[7], \"expo-linking\");\n  var Linking = _interopNamespace(_expoLinking);\n  var _reactJsxDevRuntime = require(_dependencyMap[8], \"react/jsx-dev-runtime\");\n  function AuthCallback() {\n    _s();\n    const {\n      login\n    } = (0, _contextsAuthContext.useAuth)();\n    const router = (0, _expoRouter.useRouter)();\n    const hasProcessed = (0, _react.useRef)(false);\n    (0, _react.useEffect)(() => {\n      if (hasProcessed.current) return;\n      hasProcessed.current = true;\n      const processAuth = async () => {\n        try {\n          // Get the URL that opened the app\n          const url = await Linking.getInitialURL();\n          console.log('Callback URL:', url);\n          if (url) {\n            // Extract session_id from URL fragment\n            const fragment = url.split('#')[1];\n            if (fragment) {\n              const params = new URLSearchParams(fragment);\n              const sessionId = params.get('session_id');\n              if (sessionId) {\n                console.log('Session ID found:', sessionId);\n                await login(sessionId);\n                router.replace('/(tabs)/feed');\n                return;\n              }\n            }\n          }\n\n          // If no session_id found, redirect to login\n          console.log('No session ID found');\n          router.replace('/');\n        } catch (error) {\n          console.error('Auth callback error:', error);\n          router.replace('/');\n        }\n      };\n      processAuth();\n    }, []);\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(View.default, {\n      style: styles.container,\n      children: [/*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(ActivityIndicator.default, {\n        size: \"large\",\n        color: \"#8B4513\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 7\n      }, this), /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(Text.default, {\n        style: styles.text,\n        children: \"Completing sign in...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 5\n    }, this);\n  }\n  _s(AuthCallback, \"vOrmLumeVG/U9Tw7wSzxc/TX5Dc=\", false, function () {\n    return [_contextsAuthContext.useAuth, _expoRouter.useRouter];\n  });\n  _c = AuthCallback;\n  const styles = StyleSheet.default.create({\n    container: {\n      flex: 1,\n      backgroundColor: '#FFF8DC',\n      justifyContent: 'center',\n      alignItems: 'center'\n    },\n    text: {\n      marginTop: 16,\n      fontSize: 16,\n      color: '#8B4513'\n    }\n  });\n  var _c;\n  $RefreshReg$(_c, \"AuthCallback\");\n});","lineCount":131,"map":[[29,2,7,15,"Object"],[29,8,7,15],[29,9,7,15,"defineProperty"],[29,23,7,15],[29,24,7,15,"exports"],[29,31,7,15],[30,4,7,15,"enumerable"],[30,14,7,15],[31,4,7,15,"get"],[31,7,7,15],[31,18,7,15,"get"],[31,19,7,15],[32,6,7,15],[32,13,7,15,"AuthCallback"],[32,25,7,15],[33,4,7,15],[34,2,7,15],[35,2,1,0],[35,6,1,0,"_react"],[35,12,1,0],[35,15,1,0,"require"],[35,22,1,0],[35,23,1,0,"_dependencyMap"],[35,37,1,0],[36,2,1,49],[36,6,1,49,"_reactNativeWebDistExportsView"],[36,36,1,49],[36,39,1,49,"require"],[36,46,1,49],[36,47,1,49,"_dependencyMap"],[36,61,1,49],[37,2,1,49],[37,6,1,49,"View"],[37,10,1,49],[37,13,1,49,"_interopDefault"],[37,28,1,49],[37,29,1,49,"_reactNativeWebDistExportsView"],[37,59,1,49],[38,2,1,49],[38,6,1,49,"_reactNativeWebDistExportsText"],[38,36,1,49],[38,39,1,49,"require"],[38,46,1,49],[38,47,1,49,"_dependencyMap"],[38,61,1,49],[39,2,1,49],[39,6,1,49,"Text"],[39,10,1,49],[39,13,1,49,"_interopDefault"],[39,28,1,49],[39,29,1,49,"_reactNativeWebDistExportsText"],[39,59,1,49],[40,2,1,49],[40,6,1,49,"_reactNativeWebDistExportsStyleSheet"],[40,42,1,49],[40,45,1,49,"require"],[40,52,1,49],[40,53,1,49,"_dependencyMap"],[40,67,1,49],[41,2,1,49],[41,6,1,49,"StyleSheet"],[41,16,1,49],[41,19,1,49,"_interopDefault"],[41,34,1,49],[41,35,1,49,"_reactNativeWebDistExportsStyleSheet"],[41,71,1,49],[42,2,1,49],[42,6,1,49,"_reactNativeWebDistExportsActivityIndicator"],[42,49,1,49],[42,52,1,49,"require"],[42,59,1,49],[42,60,1,49,"_dependencyMap"],[42,74,1,49],[43,2,1,49],[43,6,1,49,"ActivityIndicator"],[43,23,1,49],[43,26,1,49,"_interopDefault"],[43,41,1,49],[43,42,1,49,"_reactNativeWebDistExportsActivityIndicator"],[43,85,1,49],[44,2,3,0],[44,6,3,0,"_expoRouter"],[44,17,3,0],[44,20,3,0,"require"],[44,27,3,0],[44,28,3,0,"_dependencyMap"],[44,42,3,0],[45,2,4,0],[45,6,4,0,"_contextsAuthContext"],[45,26,4,0],[45,29,4,0,"require"],[45,36,4,0],[45,37,4,0,"_dependencyMap"],[45,51,4,0],[46,2,5,0],[46,6,5,0,"_expoLinking"],[46,18,5,0],[46,21,5,0,"require"],[46,28,5,0],[46,29,5,0,"_dependencyMap"],[46,43,5,0],[47,2,5,0],[47,6,5,0,"Linking"],[47,13,5,0],[47,16,5,0,"_interopNamespace"],[47,33,5,0],[47,34,5,0,"_expoLinking"],[47,46,5,0],[48,2,5,40],[48,6,5,40,"_reactJsxDevRuntime"],[48,25,5,40],[48,28,5,40,"require"],[48,35,5,40],[48,36,5,40,"_dependencyMap"],[48,50,5,40],[49,2,7,15],[49,11,7,24,"AuthCallback"],[49,23,7,36,"AuthCallback"],[49,24,7,36],[49,26,7,39],[50,4,7,39,"_s"],[50,6,7,39],[51,4,8,2],[51,10,8,8],[52,6,8,10,"login"],[53,4,8,16],[53,5,8,17],[53,8,8,20],[53,12,8,20,"useAuth"],[53,32,8,27],[53,33,8,27,"useAuth"],[53,40,8,27],[53,42,8,28],[53,43,8,29],[54,4,9,2],[54,10,9,8,"router"],[54,16,9,14],[54,19,9,17],[54,23,9,17,"useRouter"],[54,34,9,26],[54,35,9,26,"useRouter"],[54,44,9,26],[54,46,9,27],[54,47,9,28],[55,4,10,2],[55,10,10,8,"hasProcessed"],[55,22,10,20],[55,25,10,23],[55,29,10,23,"useRef"],[55,35,10,29],[55,36,10,29,"useRef"],[55,42,10,29],[55,44,10,30],[55,49,10,35],[55,50,10,36],[56,4,12,2],[56,8,12,2,"useEffect"],[56,14,12,11],[56,15,12,11,"useEffect"],[56,24,12,11],[56,26,12,12],[56,32,12,18],[57,6,13,4],[57,10,13,8,"hasProcessed"],[57,22,13,20],[57,23,13,21,"current"],[57,30,13,28],[57,32,13,30],[58,6,14,4,"hasProcessed"],[58,18,14,16],[58,19,14,17,"current"],[58,26,14,24],[58,29,14,27],[58,33,14,31],[59,6,16,4],[59,12,16,10,"processAuth"],[59,23,16,21],[59,26,16,24],[59,32,16,24,"processAuth"],[59,33,16,24],[59,38,16,36],[60,8,17,6],[60,12,17,10],[61,10,18,8],[62,10,19,8],[62,16,19,14,"url"],[62,19,19,17],[62,22,19,20],[62,28,19,26,"Linking"],[62,35,19,33],[62,36,19,34,"getInitialURL"],[62,49,19,47],[62,50,19,48],[62,51,19,49],[63,10,20,8,"console"],[63,17,20,15],[63,18,20,16,"log"],[63,21,20,19],[63,22,20,20],[63,37,20,35],[63,39,20,37,"url"],[63,42,20,40],[63,43,20,41],[64,10,22,8],[64,14,22,12,"url"],[64,17,22,15],[64,19,22,17],[65,12,23,10],[66,12,24,10],[66,18,24,16,"fragment"],[66,26,24,24],[66,29,24,27,"url"],[66,32,24,30],[66,33,24,31,"split"],[66,38,24,36],[66,39,24,37],[66,42,24,40],[66,43,24,41],[66,44,24,42],[66,45,24,43],[66,46,24,44],[67,12,25,10],[67,16,25,14,"fragment"],[67,24,25,22],[67,26,25,24],[68,14,26,12],[68,20,26,18,"params"],[68,26,26,24],[68,29,26,27],[68,33,26,31,"URLSearchParams"],[68,48,26,46],[68,49,26,47,"fragment"],[68,57,26,55],[68,58,26,56],[69,14,27,12],[69,20,27,18,"sessionId"],[69,29,27,27],[69,32,27,30,"params"],[69,38,27,36],[69,39,27,37,"get"],[69,42,27,40],[69,43,27,41],[69,55,27,53],[69,56,27,54],[70,14,29,12],[70,18,29,16,"sessionId"],[70,27,29,25],[70,29,29,27],[71,16,30,14,"console"],[71,23,30,21],[71,24,30,22,"log"],[71,27,30,25],[71,28,30,26],[71,47,30,45],[71,49,30,47,"sessionId"],[71,58,30,56],[71,59,30,57],[72,16,31,14],[72,22,31,20,"login"],[72,27,31,25],[72,28,31,26,"sessionId"],[72,37,31,35],[72,38,31,36],[73,16,32,14,"router"],[73,22,32,20],[73,23,32,21,"replace"],[73,30,32,28],[73,31,32,29],[73,45,32,43],[73,46,32,44],[74,16,33,14],[75,14,34,12],[76,12,35,10],[77,10,36,8],[79,10,38,8],[80,10,39,8,"console"],[80,17,39,15],[80,18,39,16,"log"],[80,21,39,19],[80,22,39,20],[80,43,39,41],[80,44,39,42],[81,10,40,8,"router"],[81,16,40,14],[81,17,40,15,"replace"],[81,24,40,22],[81,25,40,23],[81,28,40,26],[81,29,40,27],[82,8,41,6],[82,9,41,7],[82,10,41,8],[82,17,41,15,"error"],[82,22,41,20],[82,24,41,22],[83,10,42,8,"console"],[83,17,42,15],[83,18,42,16,"error"],[83,23,42,21],[83,24,42,22],[83,46,42,44],[83,48,42,46,"error"],[83,53,42,51],[83,54,42,52],[84,10,43,8,"router"],[84,16,43,14],[84,17,43,15,"replace"],[84,24,43,22],[84,25,43,23],[84,28,43,26],[84,29,43,27],[85,8,44,6],[86,6,45,4],[86,7,45,5],[87,6,47,4,"processAuth"],[87,17,47,15],[87,18,47,16],[87,19,47,17],[88,4,48,2],[88,5,48,3],[88,7,48,5],[88,9,48,7],[88,10,48,8],[89,4,50,2],[89,24,51,4],[89,28,51,4,"_reactJsxDevRuntime"],[89,47,51,4],[89,48,51,4,"jsxDEV"],[89,54,51,4],[89,56,51,5,"View"],[89,60,51,9],[89,61,51,9,"default"],[89,68,51,9],[90,6,51,10,"style"],[90,11,51,15],[90,13,51,17,"styles"],[90,19,51,23],[90,20,51,24,"container"],[90,29,51,34],[91,6,51,34,"children"],[91,14,51,34],[91,30,52,6],[91,34,52,6,"_reactJsxDevRuntime"],[91,53,52,6],[91,54,52,6,"jsxDEV"],[91,60,52,6],[91,62,52,7,"ActivityIndicator"],[91,79,52,24],[91,80,52,24,"default"],[91,87,52,24],[92,8,52,25,"size"],[92,12,52,29],[92,14,52,30],[92,21,52,37],[93,8,52,38,"color"],[93,13,52,43],[93,15,52,44],[94,6,52,53],[95,8,52,53,"fileName"],[95,16,52,53],[95,18,52,53,"_jsxFileName"],[95,30,52,53],[96,8,52,53,"lineNumber"],[96,18,52,53],[97,8,52,53,"columnNumber"],[97,20,52,53],[98,6,52,53],[98,13,52,55],[98,14,52,56],[98,29,53,6],[98,33,53,6,"_reactJsxDevRuntime"],[98,52,53,6],[98,53,53,6,"jsxDEV"],[98,59,53,6],[98,61,53,7,"Text"],[98,65,53,11],[98,66,53,11,"default"],[98,73,53,11],[99,8,53,12,"style"],[99,13,53,17],[99,15,53,19,"styles"],[99,21,53,25],[99,22,53,26,"text"],[99,26,53,31],[100,8,53,31,"children"],[100,16,53,31],[100,18,53,32],[101,6,53,53],[102,8,53,53,"fileName"],[102,16,53,53],[102,18,53,53,"_jsxFileName"],[102,30,53,53],[103,8,53,53,"lineNumber"],[103,18,53,53],[104,8,53,53,"columnNumber"],[104,20,53,53],[105,6,53,53],[105,13,53,59],[105,14,53,60],[106,4,53,60],[107,6,53,60,"fileName"],[107,14,53,60],[107,16,53,60,"_jsxFileName"],[107,28,53,60],[108,6,53,60,"lineNumber"],[108,16,53,60],[109,6,53,60,"columnNumber"],[109,18,53,60],[110,4,53,60],[110,11,54,10],[110,12,54,11],[111,2,56,0],[112,2,56,1,"_s"],[112,4,56,1],[112,5,7,24,"AuthCallback"],[112,17,7,36],[113,4,7,36],[113,12,8,20,"useAuth"],[113,32,8,27],[113,33,8,27,"useAuth"],[113,40,8,27],[113,42,9,17,"useRouter"],[113,53,9,26],[113,54,9,26,"useRouter"],[113,63,9,26],[114,2,9,26],[115,2,9,26,"_c"],[115,4,9,26],[115,7,7,24,"AuthCallback"],[115,19,7,36],[116,2,58,0],[116,8,58,6,"styles"],[116,14,58,12],[116,17,58,15,"StyleSheet"],[116,27,58,25],[116,28,58,25,"default"],[116,35,58,25],[116,36,58,26,"create"],[116,42,58,32],[116,43,58,33],[117,4,59,2,"container"],[117,13,59,11],[117,15,59,13],[118,6,60,4,"flex"],[118,10,60,8],[118,12,60,10],[118,13,60,11],[119,6,61,4,"backgroundColor"],[119,21,61,19],[119,23,61,21],[119,32,61,30],[120,6,62,4,"justifyContent"],[120,20,62,18],[120,22,62,20],[120,30,62,28],[121,6,63,4,"alignItems"],[121,16,63,14],[121,18,63,16],[122,4,64,2],[122,5,64,3],[123,4,65,2,"text"],[123,8,65,6],[123,10,65,8],[124,6,66,4,"marginTop"],[124,15,66,13],[124,17,66,15],[124,19,66,17],[125,6,67,4,"fontSize"],[125,14,67,12],[125,16,67,14],[125,18,67,16],[126,6,68,4,"color"],[126,11,68,9],[126,13,68,11],[127,4,69,2],[128,2,70,0],[128,3,70,1],[128,4,70,2],[129,2,70,3],[129,6,70,3,"_c"],[129,8,70,3],[130,2,70,3,"$RefreshReg$"],[130,14,70,3],[130,15,70,3,"_c"],[130,17,70,3],[131,0,70,3],[131,3]],"functionMap":{"names":["<global>","AuthCallback","useEffect$argument_0","processAuth"],"mappings":"AAA;eCM;YCK;wBCI;KD6B;GDG;CDQ"},"hasCjsExports":false},"type":"js/module"}]}