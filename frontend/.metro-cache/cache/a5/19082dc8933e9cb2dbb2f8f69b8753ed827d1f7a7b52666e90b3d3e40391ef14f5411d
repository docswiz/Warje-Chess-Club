{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":49,"index":49}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/View","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"4kYBDC6LJJXoH7P9rWDi3vkLVB0=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Text","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"JKIzsQ5YQ0gDj0MIyY0Q7F1zJtU=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/StyleSheet","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"MK7+k1V+KnvCVW7Kj2k/ydtjmVU=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/ActivityIndicator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"bSAkUkqZq0shBb5bU6kCYXi4ciA=","exportNames":["*"],"imports":1}},{"name":"expo-router","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":124},"end":{"line":3,"column":62,"index":186}}],"key":"/+ErnBisjrT6aDU+GRp5Qz/lYoY=","exportNames":["*"],"imports":1}},{"name":"../contexts/AuthContext","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":187},"end":{"line":4,"column":50,"index":237}}],"key":"oNCgyH4yx4pAIVZXLqqRGB2kuCY=","exportNames":["*"],"imports":1}},{"name":"expo-linking","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":238},"end":{"line":5,"column":40,"index":278}}],"key":"UOn5wJuCXvTT9EneNUmI6H0GQgM=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/app/auth-callback.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return AuthCallback;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeWebDistExportsView = require(_dependencyMap[1], \"react-native-web/dist/exports/View\");\n  var View = _interopDefault(_reactNativeWebDistExportsView);\n  var _reactNativeWebDistExportsText = require(_dependencyMap[2], \"react-native-web/dist/exports/Text\");\n  var Text = _interopDefault(_reactNativeWebDistExportsText);\n  var _reactNativeWebDistExportsStyleSheet = require(_dependencyMap[3], \"react-native-web/dist/exports/StyleSheet\");\n  var StyleSheet = _interopDefault(_reactNativeWebDistExportsStyleSheet);\n  var _reactNativeWebDistExportsActivityIndicator = require(_dependencyMap[4], \"react-native-web/dist/exports/ActivityIndicator\");\n  var ActivityIndicator = _interopDefault(_reactNativeWebDistExportsActivityIndicator);\n  var _expoRouter = require(_dependencyMap[5], \"expo-router\");\n  var _contextsAuthContext = require(_dependencyMap[6], \"../contexts/AuthContext\");\n  var _expoLinking = require(_dependencyMap[7], \"expo-linking\");\n  var Linking = _interopNamespace(_expoLinking);\n  var _reactJsxDevRuntime = require(_dependencyMap[8], \"react/jsx-dev-runtime\");\n  function AuthCallback() {\n    const {\n      login\n    } = (0, _contextsAuthContext.useAuth)();\n    const router = (0, _expoRouter.useRouter)();\n    const hasProcessed = (0, _react.useRef)(false);\n    (0, _react.useEffect)(() => {\n      if (hasProcessed.current) return;\n      hasProcessed.current = true;\n      const processAuth = async () => {\n        try {\n          // Get the URL that opened the app\n          const url = await Linking.getInitialURL();\n          console.log('Callback URL:', url);\n          if (url) {\n            // Extract session_id from URL fragment\n            const fragment = url.split('#')[1];\n            if (fragment) {\n              const params = new URLSearchParams(fragment);\n              const sessionId = params.get('session_id');\n              if (sessionId) {\n                console.log('Session ID found:', sessionId);\n                await login(sessionId);\n                router.replace('/(tabs)/feed');\n                return;\n              }\n            }\n          }\n\n          // If no session_id found, redirect to login\n          console.log('No session ID found');\n          router.replace('/');\n        } catch (error) {\n          console.error('Auth callback error:', error);\n          router.replace('/');\n        }\n      };\n      processAuth();\n    }, []);\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(View.default, {\n      style: styles.container,\n      children: [/*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(ActivityIndicator.default, {\n        size: \"large\",\n        color: \"#8B4513\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 7\n      }, this), /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(Text.default, {\n        style: styles.text,\n        children: \"Completing sign in...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 5\n    }, this);\n  }\n  const styles = StyleSheet.default.create({\n    container: {\n      flex: 1,\n      backgroundColor: '#FFF8DC',\n      justifyContent: 'center',\n      alignItems: 'center'\n    },\n    text: {\n      marginTop: 16,\n      fontSize: 16,\n      color: '#8B4513'\n    }\n  });\n});","lineCount":123,"map":[[28,2,7,15,"Object"],[28,8,7,15],[28,9,7,15,"defineProperty"],[28,23,7,15],[28,24,7,15,"exports"],[28,31,7,15],[29,4,7,15,"enumerable"],[29,14,7,15],[30,4,7,15,"get"],[30,7,7,15],[30,18,7,15,"get"],[30,19,7,15],[31,6,7,15],[31,13,7,15,"AuthCallback"],[31,25,7,15],[32,4,7,15],[33,2,7,15],[34,2,1,0],[34,6,1,0,"_react"],[34,12,1,0],[34,15,1,0,"require"],[34,22,1,0],[34,23,1,0,"_dependencyMap"],[34,37,1,0],[35,2,1,49],[35,6,1,49,"_reactNativeWebDistExportsView"],[35,36,1,49],[35,39,1,49,"require"],[35,46,1,49],[35,47,1,49,"_dependencyMap"],[35,61,1,49],[36,2,1,49],[36,6,1,49,"View"],[36,10,1,49],[36,13,1,49,"_interopDefault"],[36,28,1,49],[36,29,1,49,"_reactNativeWebDistExportsView"],[36,59,1,49],[37,2,1,49],[37,6,1,49,"_reactNativeWebDistExportsText"],[37,36,1,49],[37,39,1,49,"require"],[37,46,1,49],[37,47,1,49,"_dependencyMap"],[37,61,1,49],[38,2,1,49],[38,6,1,49,"Text"],[38,10,1,49],[38,13,1,49,"_interopDefault"],[38,28,1,49],[38,29,1,49,"_reactNativeWebDistExportsText"],[38,59,1,49],[39,2,1,49],[39,6,1,49,"_reactNativeWebDistExportsStyleSheet"],[39,42,1,49],[39,45,1,49,"require"],[39,52,1,49],[39,53,1,49,"_dependencyMap"],[39,67,1,49],[40,2,1,49],[40,6,1,49,"StyleSheet"],[40,16,1,49],[40,19,1,49,"_interopDefault"],[40,34,1,49],[40,35,1,49,"_reactNativeWebDistExportsStyleSheet"],[40,71,1,49],[41,2,1,49],[41,6,1,49,"_reactNativeWebDistExportsActivityIndicator"],[41,49,1,49],[41,52,1,49,"require"],[41,59,1,49],[41,60,1,49,"_dependencyMap"],[41,74,1,49],[42,2,1,49],[42,6,1,49,"ActivityIndicator"],[42,23,1,49],[42,26,1,49,"_interopDefault"],[42,41,1,49],[42,42,1,49,"_reactNativeWebDistExportsActivityIndicator"],[42,85,1,49],[43,2,3,0],[43,6,3,0,"_expoRouter"],[43,17,3,0],[43,20,3,0,"require"],[43,27,3,0],[43,28,3,0,"_dependencyMap"],[43,42,3,0],[44,2,4,0],[44,6,4,0,"_contextsAuthContext"],[44,26,4,0],[44,29,4,0,"require"],[44,36,4,0],[44,37,4,0,"_dependencyMap"],[44,51,4,0],[45,2,5,0],[45,6,5,0,"_expoLinking"],[45,18,5,0],[45,21,5,0,"require"],[45,28,5,0],[45,29,5,0,"_dependencyMap"],[45,43,5,0],[46,2,5,0],[46,6,5,0,"Linking"],[46,13,5,0],[46,16,5,0,"_interopNamespace"],[46,33,5,0],[46,34,5,0,"_expoLinking"],[46,46,5,0],[47,2,5,40],[47,6,5,40,"_reactJsxDevRuntime"],[47,25,5,40],[47,28,5,40,"require"],[47,35,5,40],[47,36,5,40,"_dependencyMap"],[47,50,5,40],[48,2,7,15],[48,11,7,24,"AuthCallback"],[48,23,7,36,"AuthCallback"],[48,24,7,36],[48,26,7,39],[49,4,8,2],[49,10,8,8],[50,6,8,10,"login"],[51,4,8,16],[51,5,8,17],[51,8,8,20],[51,12,8,20,"useAuth"],[51,32,8,27],[51,33,8,27,"useAuth"],[51,40,8,27],[51,42,8,28],[51,43,8,29],[52,4,9,2],[52,10,9,8,"router"],[52,16,9,14],[52,19,9,17],[52,23,9,17,"useRouter"],[52,34,9,26],[52,35,9,26,"useRouter"],[52,44,9,26],[52,46,9,27],[52,47,9,28],[53,4,10,2],[53,10,10,8,"hasProcessed"],[53,22,10,20],[53,25,10,23],[53,29,10,23,"useRef"],[53,35,10,29],[53,36,10,29,"useRef"],[53,42,10,29],[53,44,10,30],[53,49,10,35],[53,50,10,36],[54,4,12,2],[54,8,12,2,"useEffect"],[54,14,12,11],[54,15,12,11,"useEffect"],[54,24,12,11],[54,26,12,12],[54,32,12,18],[55,6,13,4],[55,10,13,8,"hasProcessed"],[55,22,13,20],[55,23,13,21,"current"],[55,30,13,28],[55,32,13,30],[56,6,14,4,"hasProcessed"],[56,18,14,16],[56,19,14,17,"current"],[56,26,14,24],[56,29,14,27],[56,33,14,31],[57,6,16,4],[57,12,16,10,"processAuth"],[57,23,16,21],[57,26,16,24],[57,32,16,24,"processAuth"],[57,33,16,24],[57,38,16,36],[58,8,17,6],[58,12,17,10],[59,10,18,8],[60,10,19,8],[60,16,19,14,"url"],[60,19,19,17],[60,22,19,20],[60,28,19,26,"Linking"],[60,35,19,33],[60,36,19,34,"getInitialURL"],[60,49,19,47],[60,50,19,48],[60,51,19,49],[61,10,20,8,"console"],[61,17,20,15],[61,18,20,16,"log"],[61,21,20,19],[61,22,20,20],[61,37,20,35],[61,39,20,37,"url"],[61,42,20,40],[61,43,20,41],[62,10,22,8],[62,14,22,12,"url"],[62,17,22,15],[62,19,22,17],[63,12,23,10],[64,12,24,10],[64,18,24,16,"fragment"],[64,26,24,24],[64,29,24,27,"url"],[64,32,24,30],[64,33,24,31,"split"],[64,38,24,36],[64,39,24,37],[64,42,24,40],[64,43,24,41],[64,44,24,42],[64,45,24,43],[64,46,24,44],[65,12,25,10],[65,16,25,14,"fragment"],[65,24,25,22],[65,26,25,24],[66,14,26,12],[66,20,26,18,"params"],[66,26,26,24],[66,29,26,27],[66,33,26,31,"URLSearchParams"],[66,48,26,46],[66,49,26,47,"fragment"],[66,57,26,55],[66,58,26,56],[67,14,27,12],[67,20,27,18,"sessionId"],[67,29,27,27],[67,32,27,30,"params"],[67,38,27,36],[67,39,27,37,"get"],[67,42,27,40],[67,43,27,41],[67,55,27,53],[67,56,27,54],[68,14,29,12],[68,18,29,16,"sessionId"],[68,27,29,25],[68,29,29,27],[69,16,30,14,"console"],[69,23,30,21],[69,24,30,22,"log"],[69,27,30,25],[69,28,30,26],[69,47,30,45],[69,49,30,47,"sessionId"],[69,58,30,56],[69,59,30,57],[70,16,31,14],[70,22,31,20,"login"],[70,27,31,25],[70,28,31,26,"sessionId"],[70,37,31,35],[70,38,31,36],[71,16,32,14,"router"],[71,22,32,20],[71,23,32,21,"replace"],[71,30,32,28],[71,31,32,29],[71,45,32,43],[71,46,32,44],[72,16,33,14],[73,14,34,12],[74,12,35,10],[75,10,36,8],[77,10,38,8],[78,10,39,8,"console"],[78,17,39,15],[78,18,39,16,"log"],[78,21,39,19],[78,22,39,20],[78,43,39,41],[78,44,39,42],[79,10,40,8,"router"],[79,16,40,14],[79,17,40,15,"replace"],[79,24,40,22],[79,25,40,23],[79,28,40,26],[79,29,40,27],[80,8,41,6],[80,9,41,7],[80,10,41,8],[80,17,41,15,"error"],[80,22,41,20],[80,24,41,22],[81,10,42,8,"console"],[81,17,42,15],[81,18,42,16,"error"],[81,23,42,21],[81,24,42,22],[81,46,42,44],[81,48,42,46,"error"],[81,53,42,51],[81,54,42,52],[82,10,43,8,"router"],[82,16,43,14],[82,17,43,15,"replace"],[82,24,43,22],[82,25,43,23],[82,28,43,26],[82,29,43,27],[83,8,44,6],[84,6,45,4],[84,7,45,5],[85,6,47,4,"processAuth"],[85,17,47,15],[85,18,47,16],[85,19,47,17],[86,4,48,2],[86,5,48,3],[86,7,48,5],[86,9,48,7],[86,10,48,8],[87,4,50,2],[87,24,51,4],[87,28,51,4,"_reactJsxDevRuntime"],[87,47,51,4],[87,48,51,4,"jsxDEV"],[87,54,51,4],[87,56,51,5,"View"],[87,60,51,9],[87,61,51,9,"default"],[87,68,51,9],[88,6,51,10,"style"],[88,11,51,15],[88,13,51,17,"styles"],[88,19,51,23],[88,20,51,24,"container"],[88,29,51,34],[89,6,51,34,"children"],[89,14,51,34],[89,30,52,6],[89,34,52,6,"_reactJsxDevRuntime"],[89,53,52,6],[89,54,52,6,"jsxDEV"],[89,60,52,6],[89,62,52,7,"ActivityIndicator"],[89,79,52,24],[89,80,52,24,"default"],[89,87,52,24],[90,8,52,25,"size"],[90,12,52,29],[90,14,52,30],[90,21,52,37],[91,8,52,38,"color"],[91,13,52,43],[91,15,52,44],[92,6,52,53],[93,8,52,53,"fileName"],[93,16,52,53],[93,18,52,53,"_jsxFileName"],[93,30,52,53],[94,8,52,53,"lineNumber"],[94,18,52,53],[95,8,52,53,"columnNumber"],[95,20,52,53],[96,6,52,53],[96,13,52,55],[96,14,52,56],[96,29,53,6],[96,33,53,6,"_reactJsxDevRuntime"],[96,52,53,6],[96,53,53,6,"jsxDEV"],[96,59,53,6],[96,61,53,7,"Text"],[96,65,53,11],[96,66,53,11,"default"],[96,73,53,11],[97,8,53,12,"style"],[97,13,53,17],[97,15,53,19,"styles"],[97,21,53,25],[97,22,53,26,"text"],[97,26,53,31],[98,8,53,31,"children"],[98,16,53,31],[98,18,53,32],[99,6,53,53],[100,8,53,53,"fileName"],[100,16,53,53],[100,18,53,53,"_jsxFileName"],[100,30,53,53],[101,8,53,53,"lineNumber"],[101,18,53,53],[102,8,53,53,"columnNumber"],[102,20,53,53],[103,6,53,53],[103,13,53,59],[103,14,53,60],[104,4,53,60],[105,6,53,60,"fileName"],[105,14,53,60],[105,16,53,60,"_jsxFileName"],[105,28,53,60],[106,6,53,60,"lineNumber"],[106,16,53,60],[107,6,53,60,"columnNumber"],[107,18,53,60],[108,4,53,60],[108,11,54,10],[108,12,54,11],[109,2,56,0],[110,2,58,0],[110,8,58,6,"styles"],[110,14,58,12],[110,17,58,15,"StyleSheet"],[110,27,58,25],[110,28,58,25,"default"],[110,35,58,25],[110,36,58,26,"create"],[110,42,58,32],[110,43,58,33],[111,4,59,2,"container"],[111,13,59,11],[111,15,59,13],[112,6,60,4,"flex"],[112,10,60,8],[112,12,60,10],[112,13,60,11],[113,6,61,4,"backgroundColor"],[113,21,61,19],[113,23,61,21],[113,32,61,30],[114,6,62,4,"justifyContent"],[114,20,62,18],[114,22,62,20],[114,30,62,28],[115,6,63,4,"alignItems"],[115,16,63,14],[115,18,63,16],[116,4,64,2],[116,5,64,3],[117,4,65,2,"text"],[117,8,65,6],[117,10,65,8],[118,6,66,4,"marginTop"],[118,15,66,13],[118,17,66,15],[118,19,66,17],[119,6,67,4,"fontSize"],[119,14,67,12],[119,16,67,14],[119,18,67,16],[120,6,68,4,"color"],[120,11,68,9],[120,13,68,11],[121,4,69,2],[122,2,70,0],[122,3,70,1],[122,4,70,2],[123,0,70,3],[123,3]],"functionMap":{"names":["<global>","AuthCallback","useEffect$argument_0","processAuth"],"mappings":"AAA;eCM;YCK;wBCI;KD6B;GDG;CDQ"},"hasCjsExports":false},"type":"js/module"}]}